<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Spaceshits &mdash; A 2D Top-Down Space Shooter</title>
		<meta name="author" content="Odepax" />
		<meta name="description" content="Spaceshits" />
		<meta name="keywords" content="spaceshits, odepax" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#242424" />
		<link rel="stylesheet" type="text/css" href="./asset/style.css" />
		<link rel="shortcut icon" type="image/x-icon" href="./asset/favicon.ico" />
		<meta name="robots" content="index, follow" />
		<script type="module">
			import { ParameterCentral  } from "./game/central/parameter.js"
			import { NavigationCentral } from "./game/central/navigation.js"
			import { MainPage } from "./page/main.js"
			import { SettingsPage } from "./page/settings.js"
			import { QuotationPage } from "./page/quotation.js"
			import { LobbyPage } from "./page/lobby.js"
			import { ArenaPage } from "./page/arena.js"
			import { DefeatPage } from "./page/defeat.js"
			import { VictoryPage } from "./page/victory.js"

			const parameterCentral = new ParameterCentral()
			const navigationCentral = new NavigationCentral(navigationHost)

			navigationCentral.register(MainPage, () => new MainPage(navigationCentral, parameterCentral))
			navigationCentral.register(SettingsPage, () => new SettingsPage(navigationCentral, parameterCentral))
			navigationCentral.register(QuotationPage, () => new QuotationPage(navigationCentral))
			navigationCentral.register(LobbyPage, () => new LobbyPage(navigationCentral))
			navigationCentral.register(ArenaPage, () => new ArenaPage(navigationCentral, parameterCentral))
			navigationCentral.register(DefeatPage, () => new DefeatPage(navigationCentral))
			navigationCentral.register(VictoryPage, () => new VictoryPage(navigationCentral))

			navigationCentral.enter(MainPage)
		</script>
	</head>
	<body>

		<main id="navigationHost" class="navigation-host"></main>

		<template id="main-page" class="pull-in stack-horizontal">
			
			<header role="banner" class="vertical-stretch stack-horizontal" style="width: 50%;">
				<div class="stack-vertical horizontal-stretch">
					<h1 class="horizontal-right">
						<img src="./asset/logo.svg" alt="Spaceshits' logo" />
						<span>Spaceshits</span>
						<small>Harlequin</small>
					</h1>
				</div>
			</header>
			
			<section class="vertical-stretch stack-horizontal" style="width: 50%;">
				<div class="stack-vertical horizontal-stretch">
					<nav class="page-content horizontal-left stack-vertical">
						<button data-on="click:startNewGame" class="red">New</button>
						<!--<button data-on="click:resumeLastGame" class="green">Resume</button>-->
						<button data-on="click:editSettings" class="blue">
							<span>Settings</span>
							<small id="settingsTooltip" class="tooltip">...</small>
						</button>
						<a href="https://github.com/Odepax/spaceshits">GitHub</a>
						<!--<a href="https://odepax.itch.io/spaceshits-harlequin">Itch</a>-->
					</nav>
				</div>
			</section>

		</template>

		<template id="settings-page" class="pull-in stack-horizontal">
			<div class="page-content stack-horizontal">
				
				<section class="vertical-bottom">
					<button class="red" data-on="click:discardChanges">Discard</button>
				</section>

				<section class="vertical-center key-binding-grid">
					<button id="key-up" class="small green" style="grid-row-start: 3; grid-column-start: 2;">
						<span class="icon up"></span>
					</button>
					<button id="key-down" class="small green" style="grid-row-start: 4; grid-column-start: 2;">
						<span class="icon down"></span>
					</button>
					<button id="key-left" class="small green" style="grid-row-start: 4; grid-column-start: 1;">
						<span class="icon left"></span>
					</button>
					<button id="key-right" class="small green" style="grid-row-start: 4; grid-column-start: 3;">
						<span class="icon right"></span>
					</button>
					<button id="key-shoot" class="small red" style="grid-row-start: 3; grid-column-start: 8;">
						<span class="icon cross"></span>
					</button>
					<button id="key-aux" class="small blue" style="grid-row-start: 4; grid-column-start: 8;">
						<span class="icon gear"></span>
					</button>
					<button id="key-pause" class="small blue" style="grid-row-start: 1; grid-column-start: 1;">
						<span class="icon pause"></span>
					</button>

					<aside class="stack-horizontal" style="grid-row-start: 5; grid-column-start: 1; grid-row-end: 7; grid-column-end: 9;">
						<p style="text-align: center;">
							<span id="bindingLegend">...</span> <br/>
							<span id="bindingKey" style="font-size: 20px;">...</span>
						</p>
					</aside>

					<div class="canvas-wrapper" style="grid-row-start: 1; grid-column-start: 4; grid-row-end: 5; grid-column-end: 8;">
						<canvas id="testCanvas" class="game-canvas" width="240" height="240" tabindex="1"></canvas>
					</div>
				</section>

				<section class="vertical-bottom">
					<button class="green" data-on="click:saveChanges">
						<span>Save</span>
						<small id="settingsTooltip" class="tooltip">...</small>
					</button>
				</section>

			</div>
		</template>

		<template id="quotation-page" class="pull-in stack-vertical">
			<section class="page-content vertical-stretch stack-horizontal">
				<blockquote class="dialogue">
					<h2 class="source">An Echo from Space</h2>
					<p class="message" id="quote">...</p>
				</blockquote>
			</section>
		</template>

		<template id="lobby-page" class="pull-in stack-vertical">
			<h2 class="page-title">
				<span>New Game</span>
				<small>WIP</small>
			</h2>
			<section class="page-content vertical-stretch stack-horizontal">
				<button data-on="click:fleeArena" class="action-card rectangles teal">
					<span class="icon cross"></span>
					<span class="label">Flee<br /> Arena</span>
				</button>
				<canvas id="gameCanvas" class="game-canvas" style="margin-right: 10px;" width="380" height="380" tabindex="1"></canvas>
				<button data-on="click:fightArena" class="action-card triangles red">
					<span class="icon right"></span>
					<span class="label">Fight<br /> Arena<br /> #1</span>
				</button>
			</section>
		</template>

		<template id="arena-page" class="pull-in stack-horizontal">
			<section class="page-content stack-horizontal">

				<div class="stack-vertical vertical-bottom">
					<progress id="energyBar" value="1" class="orange"></progress>
					<progress id="hpBar" value="1" class="green"></progress>
				</div>

				<div class="canvas-wrapper" style="width: 720px; height: 722px; margin: 0 20px;">
					<canvas id="gameCanvas" class="game-canvas" width="700" height="700" tabindex="1"></canvas>
				</div>

				<div style="width: 190px;" ></div>

			</section>
		</template>

		<template id="defeat-page" class="push-in stack-vertical">
			<h2 class="page-title">
				<span>Defeat</span>
				<small>Floor #1, Arena #1</small>
			</h2>
			<section class="page-content vertical-stretch stack-horizontal">
				<button data-on="click:backToMain" class="action-card rectangles pink">
					<span class="icon left"></span>
					<span class="label">Sit<br /> And<br /> Cry</span>
				</button>
			</section>
		</template>

		<template id="victory-page" class="push-in stack-vertical">
			<h2 class="page-title">
				<span>Victory</span>
				<small>Floor #1, Arena #1</small>
			</h2>
			<section class="page-content vertical-stretch stack-horizontal">
				<button data-on="click:continue" class="action-card triangles yellow">
					<span class="icon right"></span>
					<span class="label">Continue</span>
				</button>
			</section>
		</template>

	</body>
</html>
